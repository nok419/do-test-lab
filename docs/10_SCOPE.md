# スコープ（目的・前提・非目的）

最終更新: 2026-02-03

---

## 1. 目的（何を実現するか）
研究室が外部公開する実験用Webアプリについて、次を同時に満たす標準を作ります。

- **安全**: 研究室ネットワーク/研究室PCを外部公開しない。参加者が研究データにアクセスできない。
- **運用可能**: 少人数の運用チームが、複数アプリを「常駐・復旧可能」に回せる。
- **再現性**: 学生が増えても、毎回ゼロから設計し直さない（テンプレとチェックリスト）。
- **費用統制**: 月額の上振れを防ぎ、実験終了後に停止・アーカイブできる。

---

## 2. 対象（この標準が面倒を見る範囲）
### 2.1 インフラ/基盤（Platform Ops が型化する）
- DigitalOcean Team / Project の作り方
- App Platform の標準設定（health check、alerts、ジョブ）
- Managed PostgreSQL（作成、接続、Trusted Sources、バックアップ方針）
- Spaces（バケット設計、アクセスキー、ポリシー/設定）
- 監視（外形監視、デプロイ失敗通知、バックアップ確認）
- コスト管理（Billing alert、台帳、棚卸し）

### 2.2 アプリ（App Owner が責任を持つが、最低限の型を提供）
- アプリ層の認証とRBAC（参加者データを守る）
- 入力検証、ログ設計（PIIをログに出さない）
- 実験データのスキーマ/保存形式
- 実験の終了時にデータエクスポート/削除する運用

---

## 3. 非目的（この標準が“やらない”こと）
- 研究室の全サービスを統一の巨大プラットフォームに統合する（過剰に大きくしない）
- 複雑なマルチテナントSaaSの完全設計（まずは研究室運用に必要十分）
- WAF/ゼロトラスト等の高度な入口防御を最初から必須化（必要に応じて段階導入）
- 完全な法務・倫理審査の代替（IRB/倫理審査は別プロセス）

---

## 4. 前提（合意しておく運用ポリシー）
### 4.1 稼働モード
- **test**: 試作/短時間デモ。落ちても良いが、データは保全する。
- **production**: 参加者を募集して実験を回す。監視・バックアップ・変更凍結（原則）。
- **archive**: 実験終了。再デプロイ可能な状態を保持し、運用コストを下げる（停止/縮退）。

### 4.2 データ保持
- 実験終了後の保持期間（例: 90日）をプロジェクト開始時に決める  
  → `ops/templates/experiment_request.md` に記載してもらう。

### 4.3 アカウント/権限
- DigitalOcean / Cloudflare の操作権限は **原則 Platform Ops に限定**（最小権限）
- 学生は GitHub push（またはPR）まで  
  ※ 例外は `20_OPERATING_MODEL.md` の「例外運用」に沿って明文化する

---

## 5. 失敗パターン（避けたいこと）
- 研究室PCを外部公開し、攻撃/踏み台化/学内ネットワークに影響
- SecretsがGitや共有ドキュメントに漏れる
- バックアップはあるが復旧できない（復旧手順未検証）
- 学生が卒業したら誰も運用できない（属人化）
- 使い終わった実験が放置され、課金が積み上がる

この失敗を避けるために「運用境界（誰が何を触るか）」を `20_OPERATING_MODEL.md` で明確化します。
