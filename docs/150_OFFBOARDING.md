# 実験終了時の手順（archive / cleanup）

最終更新: 2026-02-03

実験終了後に「放置して課金が増える」「誰も分からない」を避けるための手順です。  
**台帳更新までが完了条件** です。

---

## 1. 事前確認（App Owner）
- [ ] データの最終エクスポート方法が決まっている
- [ ] データ保持期間（例: 90日）が確認できる
- [ ] 参加者への案内（必要なら）が完了している

---

## 2. archive（停止/縮退）
### 2.1 App Platform
- [ ] Web Service を停止（またはスケールを0/最小へ）
- [ ] Scheduled Job（バックアップ等）を停止
- [ ] Domain（必要なら）を解除または別用途へ割当

### 2.2 DB
- [ ] 最終バックアップがあることを確認
- [ ] DB を縮退/停止（方針に従う）
- [ ] すぐ削除しない場合でも “削除予定日” を台帳に記載

### 2.3 Spaces
- [ ] バックアップの保持期間に従って世代管理
- [ ] 参加者アップロードを保持するか削除するかを決める

---

## 3. cleanup（削除する場合）
削除は不可逆なので、Platform Owner の承認を前提にします。

- [ ] App Platform app 削除
- [ ] DBユーザ削除 / DB削除
- [ ] Spaces keys 無効化
- [ ] （必要なら）バケット削除 / prefix削除

---

## 4. 台帳更新（必須）
`ops/templates/resource_inventory.csv` を更新：
- status: archive / deleted
- end_date
- データの保管場所（どこにエクスポートしたか）
- 削除予定日（残す場合）

---

## 5. 振り返り（推奨）
- 今回の実験で詰まった点を `docs` / チェックリストに反映する  
  → 標準が育つと運用が楽になります
